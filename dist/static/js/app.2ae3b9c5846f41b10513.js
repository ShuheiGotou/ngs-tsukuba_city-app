webpackJsonp([1],[,,,,,function(e,t,n){"use strict";t.a="http://bigclout-api.kde.cs.tsukuba.ac.jp"},,,,function(e,t,n){"use strict";var o=n(3),s=n(133),a=n(117),r=n.n(a),i=n(118),l=n.n(i),c=n(116),u=n.n(c),p=n(120),m=n.n(p);o.default.use(s.a),t.a=new s.a({base:"/vue-test/",routes:[{path:"/",name:"Home",component:r.a},{path:"/problems",name:"AllProblems",component:u.a},{path:"/problems/:id",name:"problem-detail",component:m.a},{path:"/login",name:"Login",component:l.a}]})},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n.p+"static/img/noimage.655b61f.jpg"},,,function(e,t){},function(e,t,n){function o(e){n(111)}var s=n(4)(n(78),n(130),o,null,null);e.exports=s.exports},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),s=n(34),a=n.n(s),r=n(35),i=n.n(r),l=n(36),c=(n.n(l),n(37)),u=n.n(c),p=n(9);o.default.use(a.a,{locale:i.a}),o.default.config.productionTip=!1,new o.default({el:"#app",router:p.a,template:"<App/>",components:{App:u.a}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(9);t.default={name:"app",created:function(){window.sessionStorage.getItem("access_token")||o.a.push("login")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(8),s=n.n(o),a=n(9),r=n(5),i=n(119),l=n.n(i);t.default={name:"all-problems",components:{ProblemCard:l.a},data:function(){return{problems:""}},created:function(){this.getResponses()},methods:{toProblemDetail:function(e){a.a.push({name:"problem-detail",params:{id:e.id}})},getResponses:function(){var e=this,t=window.sessionStorage.getItem("access_token"),n={headers:{Authorization:t}};s.a.get(r.a+"/v1/problems",n).then(function(t){e.problems=t.data}).catch(function(){e.$confirm("データの取得に失敗しました．再接続しますか？","ネットワークエラー",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(function(){e.getResponses()}).catch(function(){e.$message({type:"info",message:"Retrying canceled"})})})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"home",data:function(){return{title:"Welcome to App"}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(8),s=n.n(o),a=n(9),r=n(5);t.default={name:"login",data:function(){return{formData:{email:"",password:""}}},methods:{postLoginData:function(){var e=this;console.log(this.formData.email),console.log(this.formData.password),s.a.post(r.a+"/v1/login",this.formData).then(function(e){window.sessionStorage.setItem("access_token",e.data.access_token),console.log(window.sessionStorage.getItem("access_token")),a.a.push("/")}).catch(function(){e.$alert("メールアドレスまたはパスワードを確認してください","ログイン失敗",{confirmButtonText:"OK"})})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(5);t.default={name:"problem-card",props:["problem"],computed:{thumbnailUrl:function(){return this.problem.image_url?o.a+this.problem.image_url:null},problemComment:function(){if(0===this.problem.comment.length)return"No comment";var e=this.problem.comment.substr(0,256)+"...";return this.problem.comment.length>256?e:this.problem.comment},problemDate:function(){var e=new RegExp("T","g");return this.problem.created_at.replace(e," ").split(".")[0]},problemLatLon:function(){var e="no data",t="no data";return null!==this.problem.latitude&&null!==this.problem.longitude&&(e=this.problem.latitude.toFixed(3),t=this.problem.longitude.toFixed(3)),"lat: "+e+",  lon: "+t+" "},googleMapLink:function(){return null!==this.problem.latitude&&null!==this.problem.longitude?"https://google.co.jp/maps/search/"+this.problem.latitude+"+"+this.problem.longitude:null}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(8),s=n.n(o),a=n(5),r=n(121),i=n.n(r),l=n(122),c=n.n(l),u=n(123),p=n.n(u);t.default={name:"problem-detail",data:function(){return{problem:""}},components:{ProblemDetailCard:i.a,ResponseInput:c.a,ResponseList:p.a},created:function(){this.getResponses()},methods:{getResponses:function(){var e=this,t=window.sessionStorage.getItem("access_token"),n={headers:{Authorization:t}},o=this.$route.params.id;s.a.get(a.a+"/v1/problems/"+o,n).then(function(t){e.problem=t.data}).catch(function(){e.$confirm("データの取得に失敗しました．再接続しますか？","ネットワークエラー",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(function(){e.getResponses()}).catch(function(){e.$message({type:"info",message:"Retrying canceled"})})})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(5);t.default={name:"problem-detail-card",props:["problem"],computed:{imageUrl:function(){return this.problem.image_url?o.a+this.problem.image_url:null},problemDate:function(){var e=new RegExp("T","g");return this.problem.created_at.replace(e," ").split(".")[0]}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(8),s=n.n(o),a=n(5);t.default={name:"response-input",props:["problem"],data:function(){return{replyComment:""}},methods:{postResponse:function(){var e=this,t=window.sessionStorage.getItem("access_token"),n={headers:{Authorization:t}},o={comment:this.replyComment};s.a.post(a.a+"/v1/problems/"+this.problem.id+"/responses",o,n).then(function(t){console.log(t),e.replyComment="",e.$message({message:"返答を送信しました．",type:"success"})}).catch(function(){e.$alert("送信できませんでした．ネットワークを確認してください．","ネットワークエラー",{confirmButtonText:"OK"})})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(8),s=n.n(o),a=n(5);t.default={name:"response-list",data:function(){return{responses:""}},created:function(){this.getResponses()},methods:{getResponses:function(){var e=this,t=window.sessionStorage.getItem("access_token"),n={headers:{Authorization:t}},o=this.$route.params.id;s.a.get(a.a+"/v1/problems/"+o+"/responses",n).then(function(t){e.responses=t.data,console.log(t.data)}).catch(function(){e.$confirm("データの取得に失敗しました．再接続しますか？","ネットワークエラー",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(function(){e.getResponses()}).catch(function(){e.$message({type:"info",message:"Retrying canceled"})})})}}}},,,,,,,,,,,,,,,,,,,function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},,,function(e,t,n){function o(e){n(105)}var s=n(4)(n(79),n(124),o,"data-v-3d83ec26",null);e.exports=s.exports},function(e,t,n){function o(e){n(110)}var s=n(4)(n(80),n(129),o,"data-v-60ecd097",null);e.exports=s.exports},function(e,t,n){function o(e){n(106)}var s=n(4)(n(81),n(125),o,"data-v-4adbae3e",null);e.exports=s.exports},function(e,t,n){function o(e){n(113)}var s=n(4)(n(82),n(132),o,"data-v-a3d6ce72",null);e.exports=s.exports},function(e,t,n){function o(e){n(109)}var s=n(4)(n(83),n(128),o,"data-v-55bd61c8",null);e.exports=s.exports},function(e,t,n){function o(e){n(112)}var s=n(4)(n(84),n(131),o,"data-v-8ab1be10",null);e.exports=s.exports},function(e,t,n){function o(e){n(107)}var s=n(4)(n(85),n(126),o,"data-v-510f44fe",null);e.exports=s.exports},function(e,t,n){function o(e){n(108)}var s=n(4)(n(86),n(127),o,"data-v-53cf9c37",null);e.exports=s.exports},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._m(0),e._v(" "),n("ul",{staticClass:"card-list"},e._l(e.problems,function(t){return n("li",{on:{click:function(n){e.toProblemDetail(t)}}},[n("problem-card",{staticClass:"card",attrs:{problem:t}})],1)}))])},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h1",[e._v("\n    困りごとの一覧ページ\n    "),n("small",[e._v("つくば市職員が閲覧するページ")])])}]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{},[n("p",[e._v("Login page")]),e._v(" "),n("el-row",[n("el-col",{attrs:{span:12,offset:6}},[n("el-card",{staticClass:"box-card"},[n("el-form",{attrs:{"label-form":"top","label-width":"100px",model:e.formData}},[n("el-form-item",{attrs:{label:"Email"}},[n("el-input",{model:{value:e.formData.email,callback:function(t){e.formData.email=t},expression:"formData.email"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"Pass"}},[n("el-input",{attrs:{type:"password"},model:{value:e.formData.password,callback:function(t){e.formData.password=t},expression:"formData.password"}})],1),e._v(" "),n("el-form-item",{attrs:{label:""}},[n("el-button",{attrs:{type:"primary"},on:{click:e.postLoginData}},[e._v("send")])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"input-area"},[n("el-input",{attrs:{type:"textarea",autosize:{minRows:3},placeholder:"Please input"},model:{value:e.replyComment,callback:function(t){e.replyComment=t},expression:"replyComment"}}),e._v(" "),n("el-button",{staticClass:"reply-button",attrs:{type:"primary"},on:{click:e.postResponse}},[e._v("Send Reply")])],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.responses.length>0?n("div",{staticClass:"box"},[n("small",[e._v("Responses list")]),e._v(" "),n("el-card",{staticClass:"box-card"},[n("ul",{staticClass:"card-list"},e._l(e.responses,function(t){return n("li",[n("p",[e._v(e._s(t.comment))])])}))])],1):n("div",{staticClass:"box"},[n("small",[e._v("no-responses")])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._m(0),e._v(" "),n("problem-detail-card",{attrs:{problem:e.problem}}),e._v(" "),n("response-list"),e._v(" "),n("response-input",{attrs:{problem:e.problem}})],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h1",[e._v("\n    返答ページ\n    "),n("small",[e._v("（詳細ページ）")])])}]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("h2",[e._v(e._s(e.title))]),e._v(" "),n("router-link",{attrs:{to:"problems"}},[e._v(" >> to problems")])],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},staticRenderFns:[]}},function(e,t,n){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"box"},[o("el-card",{staticClass:"box-card"},[o("el-row",[o("el-col",{attrs:{span:12,offset:6}},[o("div",{},[e.imageUrl?o("img",{attrs:{src:e.imageUrl}}):o("img",{attrs:{src:n(33)}})])])],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:12,offset:6}},[e._v("\n        "+e._s(e.problem.comment)+"\n      ")])],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:12,offset:6}},[o("div",{staticClass:"date"},[e._v(e._s(e.problemDate))])])],1)],1)],1)},staticRenderFns:[]}},function(e,t,n){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-card",{staticClass:"box-card"},[e.problem.responded?o("el-badge",{staticClass:"item",attrs:{hidden:""}}):o("el-badge",{staticClass:"item",attrs:{value:"返信してください！"}}),e._v(" "),o("el-row",[o("el-col",{attrs:{span:8}},[o("div",{staticClass:"thumbnail"},[e.thumbnailUrl?o("img",{attrs:{src:e.thumbnailUrl}}):o("img",{attrs:{src:n(33)}})])]),e._v(" "),o("el-col",{attrs:{span:16}},[o("div",{staticClass:"content"},[o("div",{staticClass:"comment"},[o("p",[e._v(e._s(e.problemComment))])]),e._v(" "),o("div",{staticClass:"latlon"},[e._v(e._s(e.problemLatLon))]),e._v(" "),e.googleMapLink?o("div",{staticClass:"map"},[o("a",{attrs:{href:e.googleMapLink,target:"_blank"}},[e._v(" -> check map ")])]):e._e(),e._v(" "),o("div",{staticClass:"date"},[e._v(e._s(e.problemDate))])])])],1)],1)},staticRenderFns:[]}}],[77]);
//# sourceMappingURL=app.2ae3b9c5846f41b10513.js.map